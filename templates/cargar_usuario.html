{% extends "base.html" %}
{% block title %}Cargar Usuario al Lector{% endblock %}

{% block content %}
<div class="bg-gray-800 p-8 rounded-2xl shadow-xl w-full max-w-md mx-auto">
  <h1 class="text-2xl font-bold mb-6 flex items-center gap-2">
    <i data-lucide="user-plus" class="w-6 h-6 text-green-400"></i>
    Cargar Usuario al Lector
  </h1>

  <form id="formulario" class="space-y-4">
    <div>
      <label class="block mb-1 font-medium">Nombre completo</label>
      <input type="text" name="nombre" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" required>
    </div>

    <div>
      <label class="block mb-1 font-medium">Legajo o ID</label>
      <input type="text" name="legajo" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" required>
    </div>

    <div>
      <label class="block mb-1 font-medium">Género</label>
      <div class="flex gap-4 items-center">
        <label><input type="radio" name="genero" value="Masculino" class="mr-1"> Masculino</label>
        <label><input type="radio" name="genero" value="Femenino" class="mr-1"> Femenino</label>
        <label><input type="radio" name="genero" value="Desconocido" class="mr-1" checked> Desconocido</label>
      </div>
    </div>

    <div>
      <label class="block mb-1 font-medium">Fecha de nacimiento</label>
      <input type="date" name="fecha_nacimiento" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg">
    </div>

    <div>
      <label class="block mb-1 font-medium">Teléfono</label>
      <input type="text" name="telefono" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg">
    </div>

    <div>
      <label class="block mb-1 font-medium">Válido hasta</label>
      <input type="date" name="valido_hasta" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg">
    </div>

    <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg font-semibold flex items-center justify-center gap-2">
      <i data-lucide="upload-cloud" class="w-5 h-5"></i> Cargar Usuario
    </button>
  </form>

  <div id="respuesta" class="mt-6 text-sm"></div>
</div>

<script>
  lucide.createIcons();
  const form = document.getElementById("formulario");
  const respuesta = document.getElementById("respuesta");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const data = Object.fromEntries(new FormData(form).entries());

    const res = await fetch("/cargar_usuario", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data),
    });

    const result = await res.json();
    if (res.ok) {
      respuesta.innerHTML = `<p class="text-green-400">✅ Usuario cargado correctamente</p>`;
      form.reset();
    } else {
      respuesta.innerHTML = `<p class="text-red-400">❌ Error: ${result.error || result.response}</p>`;
    }
  });
</script>
{% endblock %}
